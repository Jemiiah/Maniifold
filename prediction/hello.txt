
    // a structure to represent user predictions
    record Prediction {
        owner: address,
        pool_id: u64,
        option_index: u64,
        amount: u64,
        claimed: bool,
    }

APPNAME="predictionprivacyhack"
PRIVATEKEY="APrivateKey1zkp5osJ4AGo1pJMLnjdL2QjVd1NVdNzYqpLmKenmVXpkMkP"

snarkos developer deploy \
     "${APPNAME}.aleo" \
    --private-key "${PRIVATEKEY}" \
    --query "https://vm.aleo.org/api" \
    --path "./build/" \
    --broadcast "https://vm.aleo.org/api/testnet3/transaction/broadcast"



    // This is the constructor for the program.
    // The constructor allows you to manage program upgrades.
    // It is called when the program is deployed or upgraded.
    // It is currently configured to **prevent** upgrades.
    // Other configurations include:
    //  - @admin(address="aleo1...")
    //  - @checksum(mapping="credits.aleo/fixme", key="0field")
    //  - @custom
    // For more information, please refer to the documentation: `https://docs.leo-lang.org/guides/upgradability`


        transition main(balance: u32) -> Token {
        return Token {
            owner: self.caller,
            balance: balance,
        };
    }

    transition transfer (receiver: address, amount: u32, input: Token) -> ( Token, Token ) {
        let balance = input.balance - amount;
        let receiver_token = Token {
            owner: receiver,
            balance: amount,
        };
        let sender_token = Token {
            owner: input.owner,
            balance: balance,
        };
        return (sender_token, receiver_token);
    }






    async transition create_pool(
        title: [u64; 0], description: [u64; 0], options: [[u64; 0]; 2], deadline: u64
     ) -> (Pool, Future) {

            // generate new pool id
        let id: field = BHP256::hash_to_field(info.title);
        // Ensure the caller for pool creation is the admin.
        assert_eq(self.caller, ADMIN);
        // Return a new 'Pool' record for the auction bidder.
        let pool = Pool {
            id: id,
            title: title,
            description: description,
            options: options,
            deadline: deadline,
            status: 1u8,
            winning_option: 0u64,
            total_staked: 0u64,
            option_stakes: [[0u64; 0]; 2],
        };

        return (pool, store_pool(id));
    };

    
    async function finalize_create_pool(
        public id: field
    ) {
        Mapping::set(total_predictions, id, 0u64)
    }

